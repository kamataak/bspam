library(tidyverse)
load("C:/Users/jnese/Desktop/BRT/GRANT-Aki/project/FinalPackage/jftn/ex_data2r.Rdata")
passage.dat6
table(passage.dat6$season, useNA = "always")
set.seed(3000)
passage.dat6 %>%
filter(year == 5) %>%
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>%
distinct(student_id, .keep_all = TRUE) %>%
group_by(grade) %>%
summarise(n = n_distinct(student_id))
set.seed(3000)
passage.dat6 %>%
filter(year == 5) %>%
group_by(grade, student_id) %>%
nest() %>%
group_by(grade)
set.seed(3000)
passage.dat6 %>%
filter(year == 5) %>%
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100)
passage.dat6 %>%
filter(year == 5) %>%
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>%
unnest(cols = "data")
passage.dat6 %>%
filter(year == 5) %>%
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>%
unnest(cols = "data") %>%
ungroup()
set.seed(3000)
passage.dat6 %>%
filter(year == 5) %>% # Year 5 (2018-19) only
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>% # only 100 students per grade
unnest(cols = "data") %>%
ungroup() %>%
mutate(
occasion = case_when( # "occassion" replaces "season"
season == 1 ~ "fall",
season == 2 ~ "drop",
season == 3 ~ "winter",
season == 4 ~ "spring")
) %>%
rename(
id.student = student_id, # "id.student" replaces "student_id"
id.passage = passage_id, # "id.passage" replaces "passage_id"
sec = secs, # "sec" replaces "secs"
numwords.pass = nwords.p # "numwords.pass" replaces "nwords.p"
) %>%
filter(
occasion != "drop" # seasons 1, 3, 4 only
)
set.seed(3000)
passage.dat6 %>%
filter(year == 5) %>% # Year 5 (2018-19) only
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>% # only 100 students per grade
unnest(cols = "data") %>%
ungroup() %>%
mutate(
occasion = case_when( # "occassion" replaces "season"
season == 1 ~ "fall",
season == 2 ~ "drop",
season == 3 ~ "winter",
season == 4 ~ "spring")
) %>%
rename(
id.student = student_id, # "id.student" replaces "student_id"
id.passage = passage_id, # "id.passage" replaces "passage_id"
sec = secs, # "sec" replaces "secs"
numwords.pass = nwords.p # "numwords.pass" replaces "nwords.p"
) %>%
filter(
occasion != "drop" # seasons 1, 3, 4 only
) %>%
select(id.student, id.passage, occasion, numwords.pass, wrc, sec, grade)
table(nchar(passage.dat6$student_id))
max(passage.dat6$student_id)
?str_pad
passage.dat6 %>%
filter(year == 5) %>% # Year 5 (2018-19) only
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>% # only 100 students per grade
unnest(cols = "data") %>%
ungroup() %>%
mutate(
occasion = case_when( # "occassion" replaces "season"
season == 1 ~ "fall",
season == 2 ~ "drop",
season == 3 ~ "winter",
season == 4 ~ "spring"),
student_id = str_pad((student_id * 2) + 12, width = 4, side = "left")
)
passage.dat6 %>%
filter(year == 5) %>% # Year 5 (2018-19) only
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>% # only 100 students per grade
unnest(cols = "data") %>%
ungroup() %>%
mutate(
occasion = case_when( # "occassion" replaces "season"
season == 1 ~ "fall",
season == 2 ~ "drop",
season == 3 ~ "winter",
season == 4 ~ "spring"),
student_id = str_pad((student_id * 2) + 12, width = 4, side = "left", pad = "0")
)
passage.dat6 %>%
filter(year == 5) %>% # Year 5 (2018-19) only
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>% # only 100 students per grade
unnest(cols = "data") %>%
ungroup() %>%
mutate(
occasion = case_when( # "occassion" replaces "season"
season == 1 ~ "fall",
season == 2 ~ "drop",
season == 3 ~ "winter",
season == 4 ~ "spring")
)
passage.dat6 %>%
filter(year == 5) %>% # Year 5 (2018-19) only
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>% # only 100 students per grade
unnest(cols = "data") %>%
ungroup() %>%
mutate(
occasion = case_when( # "occassion" replaces "season"
season == 1 ~ "fall",
season == 2 ~ "drop",
season == 3 ~ "winter",
season == 4 ~ "spring"),
) %>%
rename(
id.student = student_id,
id.passage = passage_id, # "id.passage" replaces "passage_id"
sec = secs, # "sec" replaces "secs"
numwords.pass = nwords.p # "numwords.pass" replaces "nwords.p"
) %>%
mutate(id.student = str_pad((student_id * 2) + 12, width = 4, side = "left", pad = "0")) # "id.student" replaces "student_id"; "id.student" is tranformed
filter(
occasion != "drop" # seasons 1, 3, 4 only
) %>%
select(id.student, id.passage, occasion, numwords.pass, wrc, sec, grade)
passage.dat6 %>%
filter(year == 5) %>% # Year 5 (2018-19) only
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>% # only 100 students per grade
unnest(cols = "data") %>%
ungroup() %>%
mutate(
occasion = case_when( # "occassion" replaces "season"
season == 1 ~ "fall",
season == 2 ~ "drop",
season == 3 ~ "winter",
season == 4 ~ "spring"),
) %>%
rename(
id.student = student_id,
id.passage = passage_id, # "id.passage" replaces "passage_id"
sec = secs, # "sec" replaces "secs"
numwords.pass = nwords.p # "numwords.pass" replaces "nwords.p"
) %>%
mutate(id.student = str_pad((student_id * 2) + 12, width = 4, side = "left", pad = "0")) %>%  # "id.student" replaces "student_id"; "id.student" is tranformed
filter(
occasion != "drop" # seasons 1, 3, 4 only
) %>%
select(id.student, id.passage, occasion, numwords.pass, wrc, sec, grade)
passage.dat6 %>%
filter(year == 5) %>% # Year 5 (2018-19) only
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>% # only 100 students per grade
unnest(cols = "data") %>%
ungroup() %>%
mutate(
occasion = case_when( # "occassion" replaces "season"
season == 1 ~ "fall",
season == 2 ~ "drop",
season == 3 ~ "winter",
season == 4 ~ "spring"),
) %>%
rename(
id.passage = passage_id, # "id.passage" replaces "passage_id"
sec = secs, # "sec" replaces "secs"
numwords.pass = nwords.p # "numwords.pass" replaces "nwords.p"
) %>%
mutate(id.student = str_pad((student_id * 2) + 12, width = 4, side = "left", pad = "0")) %>%  # "id.student" replaces "student_id"; "id.student" is tranformed
filter(
occasion != "drop" # seasons 1, 3, 4 only
) %>%
select(id.student, id.passage, occasion, numwords.pass, wrc, sec, grade)
passage.dat6
set.seed(3000)
passages <- passage.dat6 %>%
filter(year == 5) %>% # Year 5 (2018-19) only
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>% # only 100 students per grade
unnest(cols = "data") %>%
ungroup() %>%
mutate(
occasion = case_when( # "occassion" replaces "season"
season == 1 ~ "fall",
season == 2 ~ "drop",
season == 3 ~ "winter",
season == 4 ~ "spring"),
) %>%
rename(
id.passage = passage_id, # "id.passage" replaces "passage_id"
sec = secs, # "sec" replaces "secs"
numwords.pass = nwords.p # "numwords.pass" replaces "nwords.p"
) %>%
mutate(id.student = str_pad((student_id * 2) + 12, width = 4, side = "left", pad = "0")) %>%  # "id.student" replaces "student_id"; "id.student" is tranformed
filter(
occasion != "drop" # seasons 1, 3, 4 only
) %>%
select(id.student, occasion, grade, id.passage, numwords.pass, wrc, sec)
?save()
rm(passages)
set.seed(3000)
passage <- passage.dat6 %>%
filter(year == 5) %>% # Year 5 (2018-19) only
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>% # only 100 students per grade
unnest(cols = "data") %>%
ungroup() %>%
mutate(
occasion = case_when( # "occassion" replaces "season"
season == 1 ~ "fall",
season == 2 ~ "drop",
season == 3 ~ "winter",
season == 4 ~ "spring"),
) %>%
rename(
id.passage = passage_id, # "id.passage" replaces "passage_id"
sec = secs, # "sec" replaces "secs"
numwords.pass = nwords.p # "numwords.pass" replaces "nwords.p"
) %>%
mutate(id.student = str_pad((student_id * 2) + 12, width = 4, side = "left", pad = "0")) %>%  # "id.student" replaces "student_id"; "id.student" is tranformed
filter(
occasion != "drop" # seasons 1, 3, 4 only
) %>%
select(id.student, occasion, grade, id.passage, numwords.pass, wrc, sec)
save(passage, file = "data/passage.Rdata")
save(passage, file = "data/passage.Rdata")
save(passage, file = "./data/passage.Rdata")
save(passage, file = here::here("data", "passage.Rdata"))
here;;here()
here::here()
save(passage, file = "./data/passage.Rdata"))
save(passage, file = "./data/passage.Rdata")
save(passage, file = "./data/passage.Rdata")
?usethis::use_data
usethis::use_data(passage)
?usethis::use_data_raw()
usethis::use_data_raw("passage")
?diamonds
passage
NA == NaN
NaN == NaN
library(tidyverse)
load("C:/Users/jnese/Desktop/BRT/GRANT-Aki/project/FinalPackage/jftn/ex_data2r.Rdata")
set.seed(3000)
passage <- passage.dat6 %>%
filter(year == 5) %>% # Year 5 (2018-19) only
group_by(grade, student_id) %>%
nest() %>%
group_by(grade) %>%
slice_sample(n = 100) %>% # only 100 students per grade
unnest(cols = "data") %>%
ungroup() %>%
mutate(
occasion = case_when( # "occasion" replaces "season"
season == 1 ~ "fall",
season == 2 ~ "drop",
season == 3 ~ "winter",
season == 4 ~ "spring"),
) %>%
rename(
id.passage = passage_id, # "id.passage" replaces "passage_id"
sec = secs, # "sec" replaces "secs"
numwords.pass = nwords.p # "numwords.pass" replaces "nwords.p"
) %>%
mutate(id.student = str_pad((student_id * 2) + 12, width = 4, side = "left", pad = "0")) %>%  # "id.student" replaces "student_id"; "id.student" is transformed
filter(
occasion != "drop" # seasons 1, 3, 4 only
) %>%
select(id.student, occasion, grade, id.passage, numwords.pass, wrc, sec)
usethis::use_data(passage, overwrite = TRUE)
passage
